<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Overlay SDM predictions onto base geometry — overlay_sdm • eSDM</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Overlay SDM predictions onto base geometry — overlay_sdm" />
<meta property="og:description" content="Overlay specified SDM predictions that meet the percent overlap threshold requirement onto base geometry" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/example-analysis.html">Example analysis - Woodman et al 2019</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/smwoodman/eSDM/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Overlay SDM predictions onto base geometry</h1>
    <small class="dont-index">Source: <a href='https://github.com/smwoodman/eSDM/blob/master/R/overlay_sdm.R'><code>R/overlay_sdm.R</code></a></small>
    <div class="hidden name"><code>overlay_sdm.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Overlay specified SDM predictions that meet the percent overlap threshold requirement onto base geometry</p>
    </div>

    <pre class="usage"><span class='fu'>overlay_sdm</span>(<span class='no'>base.geom</span>, <span class='no'>sdm</span>, <span class='no'>sdm.idx</span>, <span class='no'>overlap.perc</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>base.geom</th>
      <td><p>object of class <code>sfc</code>; base geometry</p></td>
    </tr>
    <tr>
      <th>sdm</th>
      <td><p>object of class <code>sf</code>; original SDM predictions</p></td>
    </tr>
    <tr>
      <th>sdm.idx</th>
      <td><p>names or indices of column(s) with data to be overlaid</p></td>
    </tr>
    <tr>
      <th>overlap.perc</th>
      <td><p>numeric; percent overlap threshold,
i.e. percentage of each base geometry polygon must overlap with SDM
prediction polygons for overlaid density value to be calculated and
not set as NA</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Object of class <code>sf</code> with the geometry of <code>base.geom</code> and
  the data in the <code>sdm.idx</code> columns of <code>sdm</code> overlaid onto that
  geometry. Note that this means all columns of <code>sdm</code> not in
  <code>sdm.idx</code> will not be in the returned object.
  Because the data are considered spatially intensive, the <code>agr</code>
  attribute will be set as 'constant' for all columns in the returned object</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>See the eSDM GUI manual for specifics about the overlay process.
  This process is equivalent to areal interpolation (Goodchild and Lam 1980),
  where <code>base.geom</code> is the target, <code>sdm</code> is the source, and the data
  specified by <code>sdm.idx</code> are spatially intensive.</p>
<p>Note that <code>overlay_sdm</code> removes rows in <code>sdm</code> that have NA values
  in the first column specified in <code>sdm.idx</code> (i.e. <code>sdm.idx[1]</code>),
  before the overlay.
  Thus, for valid overlay results, all columns of <code>sdm</code> specified in
  <code>sdm.idx</code> must either have NA values in the same rows
  or contain only NAs.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Goodchild, M.F. &amp; Lam, N.S.-N. (1980) Areal interpolation:
  a variant of the traditional spatial problem. Geo-Processing, 1, 297-312.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>overlay_sdm</span>(<span class='kw pkg'>sf</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sf/man/st_geometry.html'>st_geometry</a></span>(<span class='no'>preds.1</span>), <span class='no'>preds.2</span>, <span class='fl'>1</span>, <span class='fl'>50</span>)</div><div class='output co'>#&gt; Simple feature collection with 325 features and 1 field
#&gt; Attribute-geometry relationship: 1 constant, 0 aggregate, 0 identity
#&gt; geometry type:  POLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -123 ymin: 32 xmax: -117 ymax: 35
#&gt; CRS:            EPSG:4326
#&gt; First 10 features:
#&gt;         Density                       geometry
#&gt; 1  0.0007590157 POLYGON ((-122.875 32.125, ...
#&gt; 2  0.0006972489 POLYGON ((-122.625 32.125, ...
#&gt; 3  0.0010751667 POLYGON ((-122.375 32.125, ...
#&gt; 4  0.0018758023 POLYGON ((-122.125 32.125, ...
#&gt; 5  0.0022005786 POLYGON ((-121.875 32.125, ...
#&gt; 6  0.0023618842 POLYGON ((-121.625 32.125, ...
#&gt; 7  0.0021131219 POLYGON ((-121.375 32.125, ...
#&gt; 8  0.0019932582 POLYGON ((-121.125 32.125, ...
#&gt; 9  0.0020991526 POLYGON ((-120.875 32.125, ...
#&gt; 10 0.0020968369 POLYGON ((-120.625 32.125, ...</div><div class='input'><span class='fu'>overlay_sdm</span>(<span class='kw pkg'>sf</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sf/man/st_geometry.html'>st_geometry</a></span>(<span class='no'>preds.2</span>), <span class='no'>preds.1</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Density"</span>, <span class='st'>"Density2"</span>), <span class='fl'>50</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: The following columns have 'NA' prediction values for different prediction polygons than the first column specified in 'sdm.idx', and thus their overlaid values will be invalid (see the function documentation for more details):</span>
#&gt; <span class='warning'>Density2</span></div><div class='output co'>#&gt; Simple feature collection with 1891 features and 2 fields
#&gt; Attribute-geometry relationship: 2 constant, 0 aggregate, 0 identity
#&gt; geometry type:  POLYGON
#&gt; dimension:      XY
#&gt; bbox:           xmin: -123 ymin: 32 xmax: -117 ymax: 35
#&gt; CRS:            EPSG:4326
#&gt; First 10 features:
#&gt;       Density  Density2                       geometry
#&gt; 1  0.18149697 0.2801785 POLYGON ((-122.95 32.05, -1...
#&gt; 2  0.14315669 0.3069032 POLYGON ((-122.85 32.05, -1...
#&gt; 3  0.02813584 0.3870771 POLYGON ((-122.75 32.05, -1...
#&gt; 4  0.02813584 0.3870771 POLYGON ((-122.65 32.05, -1...
#&gt; 5  0.05654899 0.2360303 POLYGON ((-122.55 32.05, -1...
#&gt; 6  0.06602004 0.1856814 POLYGON ((-122.45 32.05, -1...
#&gt; 7  0.05677609 0.3732202 POLYGON ((-122.35 32.05, -1...
#&gt; 8  0.02904423 0.9358365 POLYGON ((-122.25 32.05, -1...
#&gt; 9  0.02904423 0.9358365 POLYGON ((-122.15 32.05, -1...
#&gt; 10 0.03472994 0.2475016 POLYGON ((-122.05 32.05, -1...</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Woodman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


